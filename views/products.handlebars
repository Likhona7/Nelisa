<h1 class="area">Products</h1>


<body class="fixed-sn graphite-skin">
  <form action="/products/search/" method="post">
  <input type="text" id="searchBarProducts" class="searchBar" name="search_val" placeholder="Search.."  method="POST">
  <input type="submit" value="search">
</form>
{{#if user.is_admin}}
  <a href="/products/add" type="button" id="add_button" class="btn btn-default-outline waves-effect"><i class="fa fa-plus" style="color:lightblue;text-shadow:2px 2px 4px #000000;"></i>Add</a>
  {{else}}
  <a></a>
{{/if}}
<div class="table-responsive  table-bordered table-hover">

<table id="searchBarProducts" class="table">
   <thead>
     <tr>
       <th  style="color:linen; text-shadow:0px 10px 7px black" >products name</th>
       <th  style="color:linen; text-shadow:0px 10px 7px black">Categories Name</th>
           </tr>
   </thead>
   <tbody>
      {{#products}}
     <tr id="Pagetable" id="colorTable">

       <td id="colorTable" style="color:linen; text-shadow:0px 10px 7px black"><strong>{{product_name}}</strong>
       </td>
       <td id="colorTable" style="color:linen; text-shadow:0px 10px 7px black"><strong>{{description}}</strong></td>

       {{#if ../is_admin}}
       <td><a href="/products/edit/{{id}}" type="button" id="edit_button" class="btn btn-success-outline waves-effect btn-sm"><span <i class="fa fa-edit"style="color:lightgreen;text-shadow:2px 2px 4px #000000;" aria-hidden="true"></i></span> Edit</a></td>

         <td><a href="/products/delete/{{id}}" type="button" id="delete_button" class="btn btn-danger-outline "><span><i class="fa fa-trash" style="color:red;text-shadow:2px 2px 4px #000000;" aria-hidden="true"></i></span>Delete</a></td>
         {{else}}
         <td></td>
         {{/if}}
     </tr>
       {{/products}}
   </tbody>
 </table>
</div>
<script>
  $(document).ready(function() {
    $("#searchBarProducts").keyup(function() {
      var search_val = $("#searchBarProducts").val();
      console.log(search_val);
      $.post("/products/search", {search_val : search_val} , function(results) {
        console.log(search_val);
        $("#productSearch").html(results)
        console.log(results);
      });
      if (search_val.length === 0) {
        location.reload();
      };
    });
  });
</script>
</body>
